{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/bitjungle/gopca/schemas/v1/model-metadata.schema.json",
  "title": "PCA Model Metadata",
  "description": "Metadata about the PCA model and analysis configuration",
  "type": "object",
  "required": ["software_version", "created_at", "software", "config"],
  "properties": {
    "software_version": {
      "type": "string",
      "description": "GoPCA software version (e.g., '0.9.0', 'dev')",
      "minLength": 1
    },
    "created_at": {
      "type": "string",
      "description": "ISO 8601 timestamp of model creation",
      "format": "date-time"
    },
    "software": {
      "type": "string",
      "description": "Software used to create the model",
      "const": "gopca"
    },
    "config": {
      "type": "object",
      "description": "Configuration used for PCA analysis",
      "required": ["method", "n_components"],
      "properties": {
        "method": {
          "$ref": "common.schema.json#/definitions/PCAMethod"
        },
        "n_components": {
          "type": "integer",
          "description": "Number of principal components computed",
          "minimum": 1
        },
        "missing_strategy": {
          "$ref": "common.schema.json#/definitions/MissingValueStrategy"
        },
        "excluded_rows": {
          "type": "array",
          "description": "0-based indices of excluded rows",
          "items": {
            "type": "integer",
            "minimum": 0
          }
        },
        "excluded_columns": {
          "type": "array",
          "description": "0-based indices of excluded columns",
          "items": {
            "type": "integer",
            "minimum": 0
          }
        },
        "kernel_type": {
          "$ref": "common.schema.json#/definitions/KernelType",
          "description": "Kernel type (only for kernel PCA)"
        },
        "kernel_gamma": {
          "type": "number",
          "description": "RBF/Polynomial kernel parameter",
          "minimum": 0
        },
        "kernel_degree": {
          "type": "integer",
          "description": "Polynomial kernel degree",
          "minimum": 1
        },
        "kernel_coef0": {
          "type": "number",
          "description": "Polynomial kernel coefficient"
        }
      }
    }
  }
}